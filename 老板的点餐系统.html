<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€æ¿çš„ç‚¹é¤ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            text-align: center;
            padding: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .menu-section {
            flex: 2.5;
            padding: 30px;
            background: #f8f9fa;
        }

        .category-tabs {
            display: flex;
            margin-bottom: 30px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .category-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: white;
            font-size: 1.1em;
            font-weight: bold;
            color: #7f8c8d;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .category-tab:hover:not(.active) {
            background: #ecf0f1;
        }

        .category-content {
            display: none;
        }

        .category-content.active {
            display: block;
        }

        .category-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border-radius: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .menu-item {
            background: white;
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid #3498db;
            overflow: hidden;
        }

        .menu-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .menu-item-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px 15px 0 0;
            transition: transform 0.3s ease;
            background: linear-gradient(45deg, #f1f2f6, #ddd);
        }

        .menu-item:hover .menu-item-image {
            transform: scale(1.05);
        }

        .menu-item-image[src*="data:image/svg"] {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .menu-item-content {
            padding: 25px;
        }

        .menu-item h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-item .price {
            color: #e74c3c;
            font-size: 1.6em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .menu-item .description {
            color: #7f8c8d;
            font-size: 0.95em;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .quantity-control button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: #3498db;
            color: white;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-control button:hover {
            background: #2980b9;
            transform: scale(1.1);
        }

        .quantity-control button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .quantity-input {
            width: 70px;
            text-align: center;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            padding: 10px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .add-to-cart {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-to-cart:hover {
            background: linear-gradient(135deg, #27ae60, #229954);
            transform: translateY(-3px);
        }

        .cart-section {
            flex: 1;
            background: #2c3e50;
            color: white;
            padding: 30px;
        }

        .cart-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .cart-header h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .cart-item {
            background: #34495e;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .cart-item:hover {
            background: #3b4c63;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .cart-item-details {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .cart-item-price {
            font-weight: bold;
            color: #f39c12;
            font-size: 1.1em;
        }

        .remove-btn {
            background: #e74c3c;
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .order-time-section {
            background: #34495e;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .order-time-title {
            color: white;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .time-options {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .time-option {
            flex: 1;
            padding: 10px;
            background: #2c3e50;
            color: white;
            border: 2px solid #34495e;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .time-option.active {
            background: #3498db;
            border-color: #2980b9;
        }

        .time-option:hover {
            background: #3498db;
        }

        .datetime-inputs {
            display: none;
            gap: 10px;
            margin-top: 10px;
        }

        .datetime-inputs.show {
            display: flex;
        }

        .datetime-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #34495e;
            border-radius: 6px;
            background: white;
            font-size: 0.9em;
        }

        .datetime-input:focus {
            border-color: #3498db;
            outline: none;
        }

        .selected-time {
            background: #2c3e50;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            margin-top: 10px;
            color: #f39c12;
            font-size: 0.9em;
        }

        .cart-total {
            background: #e74c3c;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            margin: 25px 0;
        }

        .cart-total h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .total-amount {
            font-size: 2.2em;
            font-weight: bold;
        }

        .submit-order {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-order:hover {
            background: linear-gradient(135deg, #e67e22, #d35400);
            transform: translateY(-3px);
        }

        .submit-order:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .clear-cart {
            width: 100%;
            padding: 12px;
            background: transparent;
            color: #e74c3c;
            border: 2px solid #e74c3c;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .clear-cart:hover {
            background: #e74c3c;
            color: white;
        }

        .empty-cart {
            text-align: center;
            opacity: 0.7;
            padding: 50px 20px;
        }

        .category-icon {
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }

            .category-tabs {
                flex-direction: column;
            }

            .time-options {
                flex-direction: column;
                gap: 8px;
            }

            .datetime-inputs {
                flex-direction: column;
                gap: 8px;
            }

            .order-time-title {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ½ï¸ è€æ¿çš„ç‚¹é¤ç³»ç»Ÿ</h1>
            <p>æ¬¢è¿æ¥åˆ°ç¾é£Ÿå¤©å ‚ï¼Œäº«å—æœ€ä¼˜è´¨çš„é¤é¥®ä½“éªŒ - ç²¾é€‰åˆ†ç±»èœå“</p>
        </div>

        <div class="main-content">
            <div class="menu-section">
                <div class="category-tabs">
                    <button class="category-tab active" onclick="showCategory('staple')">
                        <span class="category-icon">ğŸš</span> ä¸»é£Ÿ
                    </button>
                    <button class="category-tab" onclick="showCategory('soup')">
                        <span class="category-icon">ğŸ²</span> æ±¤å“
                    </button>
                    <button class="category-tab" onclick="showCategory('stirfry')">
                        <span class="category-icon">ğŸ¥˜</span> ç‚’èœ
                    </button>
                    <button class="category-tab" onclick="showCategory('specialty')">
                        <span class="category-icon">â­</span> ç‰¹è‰²èœ
                    </button>
                </div>

                <!-- ä¸»é£Ÿç±» -->
                <div id="staple" class="category-content active">
                    <div class="category-title">ğŸš ä¸»é£Ÿç±»</div>
                    <div class="menu-grid" id="stapleGrid">
                        <!-- ä¸»é£Ÿèœå“å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                </div>

                <!-- æ±¤å“ç±» -->
                <div id="soup" class="category-content">
                    <div class="category-title">ğŸ² æ±¤å“ç±»</div>
                    <div class="menu-grid" id="soupGrid">
                        <!-- æ±¤å“å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                </div>

                <!-- ç‚’èœç±» -->
                <div id="stirfry" class="category-content">
                    <div class="category-title">ğŸ¥˜ ç‚’èœç±»</div>
                    <div class="menu-grid" id="stirfryGrid">
                        <!-- ç‚’èœå°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                </div>

                <!-- ç‰¹è‰²èœç±» -->
                <div id="specialty" class="category-content">
                    <div class="category-title">â­ ç‰¹è‰²èœç±»</div>
                    <div class="menu-grid" id="specialtyGrid">
                        <!-- ç‰¹è‰²èœå°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <div class="cart-section">
                <div class="cart-header">
                    <h2>ğŸ›’ è´­ç‰©è½¦</h2>
                    <p>å·²é€‰æ‹© <span id="cartCount">0</span> ä»¶å•†å“</p>
                </div>

                <div id="cartItems">
                    <div class="empty-cart">
                        <p>è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„</p>
                        <p>å¿«å»é€‰æ‹©æ‚¨å–œæ¬¢çš„èœå“å§ï¼</p>
                    </div>
                </div>

                <div class="order-time-section">
                    <div class="order-time-title">ğŸ“… è®¢å•æ—¶é—´</div>
                    <div class="time-options">
                        <div class="time-option active" onclick="selectTimeOption('now')">
                            ğŸš€ ç«‹å³ä¸‹å•
                        </div>
                        <div class="time-option" onclick="selectTimeOption('scheduled')">
                            â° é¢„çº¦æ—¶é—´
                        </div>
                    </div>
                    <div class="datetime-inputs" id="datetimeInputs">
                        <input type="date" class="datetime-input" id="orderDate" onchange="updateSelectedTime()">
                        <input type="time" class="datetime-input" id="orderTime" onchange="updateSelectedTime()">
                    </div>
                    <div class="selected-time" id="selectedTime">
                        é€‰æ‹©çš„æ—¶é—´ï¼šç«‹å³ä¸‹å•
                    </div>
                </div>

                <div class="cart-total">
                    <h3>æ€»è®¡</h3>
                    <div class="total-amount">Â¥<span id="totalAmount">0.00</span></div>
                </div>

                <button class="submit-order" id="submitOrder" disabled onclick="submitOrder()">
                    æäº¤è®¢å•
                </button>
                <button class="clear-cart" onclick="clearCart()">
                    æ¸…ç©ºè´­ç‰©è½¦
                </button>
            </div>
        </div>
    </div>

    <script>
        // æŒ‰åˆ†ç±»ç»„ç»‡çš„èœå“æ•°æ®
        const menuData = {
            staple: [
                {id: 1, name: "èš‚èšä¸Šæ ‘", price: 25.00, description: "ç²‰ä¸çˆ½æ»‘ï¼Œè‚‰æœ«é¦™æµ“ï¼Œå£æ„Ÿä¸°å¯Œ", icon: "ğŸœ", image: "https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=faces"},
                {id: 2, name: "æ‰¬å·ç‚’é¥­", price: 22.00, description: "ç²’ç²’åˆ†æ˜ï¼Œé…èœä¸°å¯Œï¼Œç»å…¸ä¸»é£Ÿ", icon: "ğŸš", image: "https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=400&h=300&fit=crop&crop=faces"},
                {id: 3, name: "çº¢çƒ§æ’éª¨é¢", price: 28.00, description: "é¢æ¡åŠ²é“ï¼Œæ’éª¨é¦™æµ“ï¼Œæ±¤æ±æµ“éƒ", icon: "ğŸ", image: "https://images.unsplash.com/photo-1555126634-323283e090fa?w=400&h=300&fit=crop&crop=faces"},
                {id: 4, name: "ç‰›è‚‰æ‹‰é¢", price: 26.00, description: "æ‰‹å·¥æ‹‰é¢ï¼Œç‰›è‚‰é²œå«©ï¼Œæ±¤å¤´é†‡åš", icon: "ğŸœ", image: "https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=300&fit=crop&crop=center"},
                {id: 5, name: "éŸ­èœçŒªè‚‰è’¸é¥º", price: 20.00, description: "çš®è–„é¦…å¤§ï¼ŒéŸ­èœé¦™æµ“ï¼Œæ‰‹å·¥åˆ¶ä½œ", icon: "ğŸ¥Ÿ", image: "https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=400&h=300&fit=crop&crop=center"}
            ],
            soup: [
                {id: 6, name: "è’¸è›‹ç¾¹", price: 15.00, description: "å«©æ»‘å¦‚ä¸ï¼Œè¥å…»ä¸°å¯Œï¼Œè€å°‘çš†å®œ", icon: "ğŸ¥š", image: "https://images.unsplash.com/photo-1588566565463-180a5b2090d2?w=400&h=300&fit=crop&crop=center"},
                {id: 7, name: "ç´«èœè›‹èŠ±æ±¤", price: 12.00, description: "æ¸…æ·¡é²œç¾ï¼Œè¥å…»ä¸°å¯Œï¼Œå®¶å¸¸æ±¤å“", icon: "ğŸ²", image: "https://images.unsplash.com/photo-1547592180-85f173990554?w=400&h=300&fit=crop&crop=center"},
                {id: 8, name: "å†¬ç“œæ’éª¨æ±¤", price: 32.00, description: "æ¸…é¦™è§£è…»ï¼Œæ’éª¨é…¥çƒ‚ï¼Œæ±¤æ±æ¸…ç”œ", icon: "ğŸ²", image: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=400&h=300&fit=crop&crop=center"},
                {id: 9, name: "é…¸è¾£æ±¤", price: 18.00, description: "é…¸è¾£å¼€èƒƒï¼Œå£æ„Ÿä¸°å¯Œï¼Œç»å…¸å·èœ", icon: "ğŸŒ¶ï¸", image: "https://images.unsplash.com/photo-1547592180-85f173990554?w=400&h=300&fit=crop&crop=faces"},
                {id: 10, name: "é“¶è€³è²å­æ±¤", price: 16.00, description: "æ»‹é˜´æ¶¦ç‡¥ï¼Œç”œæ¶¦å¯å£ï¼Œå…»ç”Ÿä½³å“", icon: "ğŸ¯", image: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=400&h=300&fit=crop&crop=faces"}
            ],
            stirfry: [
                {id: 11, name: "å®«ä¿é¸¡ä¸", price: 28.00, description: "ç»å…¸å·èœï¼Œé¸¡ä¸å«©æ»‘ï¼ŒèŠ±ç”Ÿé…¥è„†", icon: "ğŸ”", image: "https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400&h=300&fit=crop&crop=center"},
                {id: 12, name: "éº»å©†è±†è…", price: 22.00, description: "å››å·åèœï¼Œéº»è¾£é²œé¦™ï¼Œè±†è…å«©æ»‘", icon: "ğŸŒ¶ï¸", image: "https://images.unsplash.com/photo-1606491956689-2ea866880c84?w=400&h=300&fit=crop&crop=center"},
                {id: 13, name: "é±¼é¦™è‚‰ä¸", price: 26.00, description: "å·èœç»å…¸ï¼Œç”œé…¸å¾®è¾£ï¼Œå›å‘³æ— ç©·", icon: "ğŸŸ", image: "https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400&h=300&fit=crop&crop=faces"},
                {id: 14, name: "é’æ¤’è‚‰ä¸", price: 24.00, description: "å®¶å¸¸å°ç‚’ï¼Œæ¸…é¦™çˆ½è„†ï¼Œè¥å…»å‡è¡¡", icon: "ğŸ«‘", image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop&crop=center"},
                {id: 15, name: "è¥¿çº¢æŸ¿é¸¡è›‹", price: 18.00, description: "ç»å…¸æ­é…ï¼Œé…¸ç”œå¼€èƒƒï¼Œè¥å…»ä¸°å¯Œ", icon: "ğŸ…", image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop&crop=faces"}
            ],
            specialty: [
                {id: 16, name: "çº¢çƒ§è‚‰", price: 35.00, description: "ä¼ ç»Ÿå®¶å¸¸èœï¼Œè‚¥ç˜¦ç›¸é—´ï¼Œå…¥å£å³åŒ–", icon: "ğŸ¥©", image: "https://images.unsplash.com/photo-1544025162-d76694265947?w=400&h=300&fit=crop&crop=center"},
                {id: 17, name: "æ°´ç…®é±¼", price: 45.00, description: "éº»è¾£é²œé¦™ï¼Œé±¼è‚‰å«©æ»‘ï¼Œæ±¤æ±æµ“éƒ", icon: "ğŸŸ", image: "https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400&h=300&fit=crop&crop=center"},
                {id: 18, name: "æ¸…è’¸é²ˆé±¼", price: 48.00, description: "é±¼è‚‰é²œç¾ï¼Œè¥å…»ä¸°å¯Œï¼Œåˆ¶ä½œç²¾ç»†", icon: "ğŸ ", image: "https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400&h=300&fit=crop&crop=center"},
                {id: 19, name: "ç™½åˆ‡é¸¡", price: 38.00, description: "ç²¤èœåå“ï¼Œé¸¡è‚‰é²œå«©ï¼ŒåŸæ±åŸå‘³", icon: "ğŸ”", image: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop&crop=center"},
                {id: 20, name: "å£æ°´é¸¡", price: 33.00, description: "å·èœå‡‰èœï¼Œéº»è¾£é²œé¦™ï¼Œå£æ„Ÿä¸°å¯Œ", icon: "ğŸŒ¶ï¸", image: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop&crop=faces"}
            ]
        };

        let cart = [];
        let currentCategory = 'staple';
        let selectedTimeOption = 'now';
        let orderDateTime = null;

        // åˆ‡æ¢åˆ†ç±»
        function showCategory(category) {
            // éšè—æ‰€æœ‰å†…å®¹
            document.querySelectorAll('.category-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹
            document.getElementById(category).classList.add('active');
            
            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾
            event.target.classList.add('active');
            
            currentCategory = category;
        }

        // åˆå§‹åŒ–èœå•
        function initMenu() {
            Object.keys(menuData).forEach(category => {
                const grid = document.getElementById(category + 'Grid');
                grid.innerHTML = '';
                
                menuData[category].forEach(item => {
                    const menuItemHTML = `
                        <div class="menu-item">
                            <img src="${item.image}" alt="${item.name}" class="menu-item-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjhGOUZBIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzdGOEM4RCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+JHtpdGVtLmljb259PC90ZXh0Pgo8L3N2Zz4K'">
                            <div class="menu-item-content">
                                <h3>${item.icon} ${item.name}</h3>
                                <div class="price">Â¥${item.price.toFixed(2)}</div>
                                <div class="description">${item.description}</div>
                                <div class="quantity-control">
                                    <button onclick="decreaseQuantity(${item.id})">-</button>
                                    <input type="number" class="quantity-input" id="quantity-${item.id}" value="1" min="1" max="99">
                                    <button onclick="increaseQuantity(${item.id})">+</button>
                                </div>
                                <button class="add-to-cart" onclick="addToCart(${item.id})">
                                    åŠ å…¥è´­ç‰©è½¦
                                </button>
                            </div>
                        </div>
                    `;
                    grid.innerHTML += menuItemHTML;
                });
            });
        }

        // è·å–èœå“ä¿¡æ¯
        function getMenuItem(itemId) {
            for (let category in menuData) {
                const item = menuData[category].find(item => item.id === itemId);
                if (item) return item;
            }
            return null;
        }

        // å¢åŠ æ•°é‡
        function increaseQuantity(itemId) {
            const quantityInput = document.getElementById(`quantity-${itemId}`);
            let quantity = parseInt(quantityInput.value);
            if (quantity < 99) {
                quantityInput.value = quantity + 1;
            }
        }

        // å‡å°‘æ•°é‡
        function decreaseQuantity(itemId) {
            const quantityInput = document.getElementById(`quantity-${itemId}`);
            let quantity = parseInt(quantityInput.value);
            if (quantity > 1) {
                quantityInput.value = quantity - 1;
            }
        }

        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(itemId) {
            const item = getMenuItem(itemId);
            const quantity = parseInt(document.getElementById(`quantity-${itemId}`).value);
            
            const existingItem = cart.find(cartItem => cartItem.id === itemId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    ...item,
                    quantity: quantity
                });
            }

            updateCart();
            
            // é‡ç½®æ•°é‡ä¸º1
            document.getElementById(`quantity-${itemId}`).value = 1;
        }

        // æ›´æ–°è´­ç‰©è½¦æ˜¾ç¤º
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const totalAmount = document.getElementById('totalAmount');
            const submitButton = document.getElementById('submitOrder');

            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <p>è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„</p>
                        <p>å¿«å»é€‰æ‹©æ‚¨å–œæ¬¢çš„èœå“å§ï¼</p>
                    </div>
                `;
                cartCount.textContent = '0';
                totalAmount.textContent = '0.00';
                submitButton.disabled = true;
                return;
            }

            let cartHTML = '';
            let total = 0;
            let totalItems = 0;

            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                totalItems += item.quantity;

                cartHTML += `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.icon} ${item.name}</div>
                            <div class="cart-item-details">Â¥${item.price.toFixed(2)} Ã— ${item.quantity}</div>
                        </div>
                        <div class="cart-item-price">Â¥${itemTotal.toFixed(2)}</div>
                        <button class="remove-btn" onclick="removeFromCart(${index})">åˆ é™¤</button>
                    </div>
                `;
            });

            cartItems.innerHTML = cartHTML;
            cartCount.textContent = totalItems;
            totalAmount.textContent = total.toFixed(2);
            submitButton.disabled = false;
        }

        // ä»è´­ç‰©è½¦ç§»é™¤å•†å“
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        // æ¸…ç©ºè´­ç‰©è½¦
        function clearCart() {
            cart = [];
            updateCart();
        }

        // æäº¤è®¢å•
        function submitOrder() {
            if (cart.length === 0) {
                alert('è´­ç‰©è½¦ä¸ºç©ºï¼Œè¯·å…ˆæ·»åŠ å•†å“ï¼');
                return;
            }

            // éªŒè¯é¢„çº¦æ—¶é—´
            if (selectedTimeOption === 'scheduled') {
                if (!orderDateTime) {
                    alert('è¯·é€‰æ‹©æœ‰æ•ˆçš„é¢„çº¦æ—¶é—´ï¼');
                    return;
                }
                
                const now = new Date();
                if (orderDateTime <= now) {
                    alert('é¢„çº¦æ—¶é—´ä¸èƒ½æ˜¯è¿‡å»æ—¶é—´ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼');
                    return;
                }
            }

            let orderDetails = 'ğŸ½ï¸ è®¢å•è¯¦æƒ…ï¼š\n\n';
            let total = 0;

            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                orderDetails += `${item.icon} ${item.name} Ã— ${item.quantity} = Â¥${itemTotal.toFixed(2)}\n`;
            });

            orderDetails += `\nğŸ’° æ€»è®¡ï¼šÂ¥${total.toFixed(2)}`;
            
            // æ·»åŠ è®¢å•æ—¶é—´ä¿¡æ¯
            if (selectedTimeOption === 'now') {
                orderDetails += `\nâ° é…é€æ—¶é—´ï¼šç«‹å³ä¸‹å• (é¢„è®¡30-45åˆ†é’Ÿå†…é€è¾¾)`;
            } else {
                const formatDate = orderDateTime.toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });
                const formatTime = orderDateTime.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                orderDetails += `\nâ° é¢„çº¦æ—¶é—´ï¼š${formatDate} ${formatTime}`;
            }
            
            orderDetails += `\nğŸ“… ä¸‹å•æ—¶é—´ï¼š${new Date().toLocaleString()}`;
            orderDetails += `\nğŸ‰ è®¢å•ç¼–å·ï¼š${Date.now()}`;

            let confirmMessage = orderDetails + '\n\nâœ… è®¢å•æäº¤æˆåŠŸï¼æ„Ÿè°¢æ‚¨çš„å…‰ä¸´ï¼';
            
            if (selectedTimeOption === 'now') {
                confirmMessage += '\nğŸšš æ‚¨çš„è®¢å•å°†åœ¨30-45åˆ†é’Ÿå†…é€è¾¾';
            } else {
                confirmMessage += '\nğŸ“ æˆ‘ä»¬ä¼šæŒ‰é¢„çº¦æ—¶é—´ä¸ºæ‚¨å‡†å¤‡è®¢å•';
            }
            
            confirmMessage += '\nğŸ‘¨â€ğŸ³ å¨æˆ¿æ­£åœ¨ä¸ºæ‚¨ç²¾å¿ƒå‡†å¤‡...';

            alert(confirmMessage);
            
            // æ¸…ç©ºè´­ç‰©è½¦å¹¶é‡ç½®æ—¶é—´é€‰æ‹©
            clearCart();
            selectedTimeOption = 'now';
            document.querySelectorAll('.time-option').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.time-option').classList.add('active');
            document.getElementById('datetimeInputs').classList.remove('show');
            updateSelectedTime();
        }

        // é€‰æ‹©æ—¶é—´é€‰é¡¹
        function selectTimeOption(option) {
            selectedTimeOption = option;
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.querySelectorAll('.time-option').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ˜¾ç¤ºæˆ–éšè—æ—¥æœŸæ—¶é—´è¾“å…¥
            const datetimeInputs = document.getElementById('datetimeInputs');
            if (option === 'scheduled') {
                datetimeInputs.classList.add('show');
                setDefaultDateTime();
            } else {
                datetimeInputs.classList.remove('show');
                updateSelectedTime();
            }
        }

        // è®¾ç½®é»˜è®¤æ—¥æœŸæ—¶é—´
        function setDefaultDateTime() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            // è®¾ç½®æœ€æ—©å¯é€‰æ—¶é—´ä¸ºæ˜å¤©
            const dateInput = document.getElementById('orderDate');
            const timeInput = document.getElementById('orderTime');
            
            dateInput.min = tomorrow.toISOString().split('T')[0];
            dateInput.value = tomorrow.toISOString().split('T')[0];
            
            // è®¾ç½®é»˜è®¤æ—¶é—´ä¸º12:00
            timeInput.value = '12:00';
            
            updateSelectedTime();
        }

        // æ›´æ–°é€‰æ‹©çš„æ—¶é—´æ˜¾ç¤º
        function updateSelectedTime() {
            const selectedTimeElement = document.getElementById('selectedTime');
            
            if (selectedTimeOption === 'now') {
                selectedTimeElement.textContent = 'é€‰æ‹©çš„æ—¶é—´ï¼šç«‹å³ä¸‹å•';
                orderDateTime = null;
            } else {
                const dateInput = document.getElementById('orderDate');
                const timeInput = document.getElementById('orderTime');
                
                if (dateInput.value && timeInput.value) {
                    const selectedDate = new Date(dateInput.value + 'T' + timeInput.value);
                    const now = new Date();
                    
                    // éªŒè¯é€‰æ‹©çš„æ—¶é—´ä¸èƒ½æ˜¯è¿‡å»æ—¶é—´
                    if (selectedDate <= now) {
                        alert('é¢„çº¦æ—¶é—´ä¸èƒ½æ˜¯è¿‡å»æ—¶é—´ï¼Œè¯·é€‰æ‹©æœªæ¥çš„æ—¶é—´ï¼');
                        setDefaultDateTime();
                        return;
                    }
                    
                    const formatDate = selectedDate.toLocaleDateString('zh-CN', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        weekday: 'long'
                    });
                    const formatTime = selectedDate.toLocaleTimeString('zh-CN', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    selectedTimeElement.textContent = `é¢„çº¦æ—¶é—´ï¼š${formatDate} ${formatTime}`;
                    orderDateTime = selectedDate;
                } else {
                    selectedTimeElement.textContent = 'è¯·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´';
                    orderDateTime = null;
                }
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–èœå•
        document.addEventListener('DOMContentLoaded', function() {
            initMenu();
            
            // åˆå§‹åŒ–æ—¶é—´é€‰æ‹©
            updateSelectedTime();
        });
    </script>
</body>
</html> 